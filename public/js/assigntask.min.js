function getTasks(t){$.get("/api/gettasks",function(a){return t(a)})}function initialiseTable(t){$("#tasktable").DataTable({data:t,rowId:"id",columns:[{data:"title"},{data:"description"},{data:"completedBy"},{data:"status"},{data:"User.name"}]})}function openModel(){M.Modal.getInstance($(".modal")).open()}function closeModel(){M.Modal.getInstance($(".modal")).close()}function getClients(t){$.get("/api/getclients",function(a){createClientTaskList(t,a)}).catch(handleLoginErr)}function createClientTaskList(t,a){for(var e=[],n=0;n<a.length;n++){var s={clientId:parseInt(a[n].id),taskId:parseInt(t),status:"Assigned"};e.push(s)}$.post("/api/createclienttasks",{data:JSON.stringify(e)}).then(function(e){closeModel(),updaTaskStatus(t,a)}).catch(handleLoginErr)}function updaTaskStatus(t,a){$.ajax("/api/updataskstatus",{type:"PUT",data:{id:t}}).then(function(t){location.reload(),sendEmailtoClient(a)}).catch(handleLoginErr)}function sendEmailtoClient(t){}$(document).ready(function(){$(".modal").modal({dismissible:!1});var t;$("#tasktable tbody").on("click","tr",function(){var a=$("#tasktable").DataTable();t=a.row(this).data(),$("#assign").attr("data-id",t.id),$("#assign").attr("data-status",t.status),$("#tasktitle").text(t.title),$("#taskdetail").text(t.description),$("#taskcompletedby").text(t.completedBy),$("#taskstatus").text(t.status),$("#taskowner").text(t.User.name),"Active"!=$("#taskstatus").text()?$("#assign").hide():$("#assign").show(),openModel()})}),$(document).on("click","#assign",function(){event.preventDefault();getClients($(this).attr("data-id"))}),getTasks(function(t){initialiseTable(t)});