function getClientTasks(t){var e=JSON.parse(sessionStorage.getItem("userInfo")).clientId;$.get("/api/viewclienttasksclient/"+e,function(e,a){return t(e)}).catch(handleLoginErr)}function updateHeaders(t){t.length>0&&($("#clientname").attr("data-clintid",t[0].clients_id),$("#clientname").text(t[0].clients_name),$("#clientaddress").text(t[0].clients_address))}function initialiseTables(t){updateHeaders(t);$("#clienttaskstable").DataTable({dom:"Bfrtip",data:t,rowId:"clienttasks_id",columns:[{data:"tasks_title"},{data:"tasks_description"},{data:"tasks_completedBy"},{data:"clienttasks_status"}],createdRow:function(t,e,a){new Date(e.tasks_completedBy)<new Date&&"Completed"!==e.clienttasks_status&&$(t).addClass("red")}})}function openModel(){M.Modal.getInstance($(".modal")).open()}function closeModel(){M.Modal.getInstance($(".modal")).close()}function updateClientTaskStatus(t){$.ajax("/api/updateassignedtaskstatus",{type:"PUT",data:{id:t}}).then(function(t){closeModel(),location.reload()}).catch(handleLoginErr)}$(document).ready(function(){$(".modal").modal({dismissible:!1});var t;$("#clienttaskstable tbody").on("click","tr",function(){var e=$("#clienttaskstable").DataTable();t=e.row(this).data(),$("#complete").attr("data-id",t.clienttasks_id),$("#complete").attr("data-status",t.clienttasks_status),$("#tasktitle").text(t.tasks_title),$("#taskdetail").text(t.tasks_description),$("#taskcompletedby").text(t.tasks_completedBy),$("#taskstatus").text(t.clienttasks_status),"Assigned"!=$("#taskstatus").text()?$("#complete").hide():$("#complete").show(),openModel()})}),$(document).on("click","#complete",function(){event.preventDefault();updateClientTaskStatus($(this).attr("data-id"))}),getClientTasks(function(t){initialiseTables(t)});